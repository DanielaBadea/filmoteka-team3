{"mappings":"iiBACA,IAAAA,EAAAC,EAAA,S,0BAGAC,SAASC,iBAAiB,oBAAoB,WACtBD,SAASE,cAAc,kBAC/BD,iBAAiB,SAG/B,WACE,IAAME,EAAoBH,SAASE,cAAc,wBAC3CE,EAAkBJ,SAASE,cAAc,sBAC/CC,EAAkBE,UAAUC,OAAO,YACnCF,EAAgBC,UAAUE,IAAI,W,IAGhC,WACE,IAAMJ,EAAoBH,SAASE,cAAc,wBAG3CM,GAAgB,EAAAC,EAAAC,kBAAiB,YAAc,GAErD,GAAIF,GAAiBA,EAAcG,OAAS,EAAG,CAC7C,IAAIC,EAoDV,SAAiCJ,G,kBAW7B,I,kBACE,GAAIK,SAASC,EAAWC,GAAGC,MAAQH,SAASL,EAAcS,IAAK,CAC7D,IAAMC,EAAeC,EAAArB,EAAA,IAAKgB,EAAWC,IAC/BK,EAAWF,EAAaG,UAC1BD,GAAYE,MAAMC,QAAQH,IAC5BF,EAAaM,YAAcC,EAAWC,QAAO,SAAAC,G,OAASP,EAASQ,SAASD,EAAMX,G,IAAKa,KAAI,SAAAF,G,OAASA,EAAMG,I,IAAMC,KAAK,MACjHC,EAAeC,KAAKf,IAEpBgB,QAAQC,MAAM,uDAAuEC,OAAhBlB,EAAaF,I,GAR/EqB,EAAI,EAAGA,EAAIvB,EAAWH,OAAQ0B,IAAGC,EAAAD,E,EAVtCvB,GAAa,EAAAL,EAAAC,kBAAiB,cAC9Be,GAAa,EAAAhB,EAAAC,kBAAiB,cAChCsB,EAAiB,GAErB,IAAKlB,IAAeW,EAElB,OADAS,QAAQC,MAAM,wCACPH,EAGT,IAAK,IAAIO,EAAI,EAAGA,EAAI/B,EAAcG,OAAQ4B,IAAGC,EAAAD,GAc7C,OAAOP,C,CA5EUS,CAAwBjC,GAC/BkC,EAAgB9B,EAAOiB,KAAI,SAAAc,G,IAAGC,EAAcD,EAAdC,eAAgBC,EAAWF,EAAXE,YAAaC,EAAYH,EAAZG,aAAc9B,EAAE2B,EAAF3B,GAAIQ,EAAWmB,EAAXnB,YAAauB,EAAYJ,EAAZI,aAC1FC,EAAa,GAEfA,EADEH,EACW,GAAkBT,OAAfa,EAAAC,cAA2Bd,OAAZa,EAAAE,SAAS,KAAef,OAAZS,GAE9B,mBAEf,IAAMO,EAAcL,EAAaM,MAAM,EAAG,GAC1C,MAAO,oCAGIjB,OAHgCpB,EAAG,+EAInCoB,OADAY,EAAW,wBAKaZ,OAJxBQ,EAAe,6GAM0BR,OAFjBU,EAAaQ,QAAQ,GAAG,iHAIVlB,OAFGQ,EAAe,kHAGjBR,OADDZ,EAAY,kEACCY,OAAZgB,EAAY,4D,IAI7DrB,KAAK,IAER5B,EAAkBoD,UAAYb,C,MAE9BvC,EAAkBoD,UAAY,iC,CA9ClCC,E","sources":["src/js/watched.js"],"sourcesContent":["// import { STORAGE_KEY_WATCHED } from \"./constants\";\nimport { loadLocalStorage } from \"./storage\";\nimport { IMG_BASE_URL, IMG_W500, getMovieDetails } from \"./api\";\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const watchedButton = document.querySelector('#watchedButton');\n  watchedButton.addEventListener('click', displayWatchedMovies);\n  handleWatchedButtonClick();\n\n  function displayWatchedMovies() {\n    const watchedMoviesList = document.querySelector('.watched-movies-list');\n    const queueMoviesList = document.querySelector('.queue-movies-list');\n    watchedMoviesList.classList.remove('inactive')\n    queueMoviesList.classList.add('inactive')\n  }\n\n  function handleWatchedButtonClick() {\n    const watchedMoviesList = document.querySelector('.watched-movies-list');\n\n\n    const watchedMovies = loadLocalStorage('watched') || [];\n\n    if (watchedMovies && watchedMovies.length > 0) {\n      var movies = getWatchedMoviesDetails(watchedMovies);\n      const postersMarkup = movies.map(({ original_title, poster_path, vote_average, id, genre_names, release_date }) => {\n        let posterPath = '';\n        if (poster_path) {\n          posterPath = `${IMG_BASE_URL}${IMG_W500}/${poster_path}`;\n        } else {\n          posterPath = 'No found poster!';\n        }\n        const releaseYear = release_date.slice(0, 4);\n        return `<li class='list-cards-item' key='${id}'>\n          <img\n            class='poster-list__img'\n            src='${posterPath}'\n            alt='${original_title}'\n            width\n            loading='lazy'\n          />\n          <span class='poster-list-rate'>${vote_average.toFixed(1)}</span>\n          <div class='poster-list-wrap'>\n            <h2 class='poster-list-title text-posters'><b>${original_title}</b></h2>\n            <div class='poster-list-info'>\n              <p class='poster-list-text text-posters'>${genre_names}</p>\n              <p class='poster-list-age text-posters'>| ${releaseYear}</p>\n            </div>\n          </div>\n        </li>`;\n      }).join('');\n\n      watchedMoviesList.innerHTML = postersMarkup;\n    } else {\n      watchedMoviesList.innerHTML = '<p>No watched movies found.</p>';\n      // Schimbă starea vizibilității\n    }\n  }\n});\n\n// function getWatchedMoviesDetails(watchedMovies) {\n//   const moviesData = loadLocalStorage('moviesData');\n//   const watchedList = loadLocalStorage('watchedList');\n//   var moviesDetailed = [];\n//   for (let i = 0; i < watchedMovies.length; i++) {\n//     for (let j = 0; j < moviesData.length; j++) {\n//       if (parseInt(moviesData[j].id) === parseInt(watchedMovies[i])) {\n//         // Adăugați informații despre genuri în detaliile filmelor\n//         const movieDetails = { ...moviesData[j] };\n//         movieDetails.genre_names = watchedList.filter(genre => movieDetails.genre_ids.includes(genre.id)).map(genre => genre.name).join(', ');\n//         moviesDetailed.push(movieDetails);\n//       }\n//     }\n//   }\n//   return moviesDetailed;\n// }\nfunction getWatchedMoviesDetails(watchedMovies) {\n  const moviesData = loadLocalStorage('moviesData');\n  const genresList = loadLocalStorage('genresList');\n  var moviesDetailed = [];\n\n  if (!moviesData || !genresList) {\n    console.error(\"Error: Missing data in local storage\");\n    return moviesDetailed;\n  }\n\n  for (let i = 0; i < watchedMovies.length; i++) {\n    for (let j = 0; j < moviesData.length; j++) {\n      if (parseInt(moviesData[j].id) === parseInt(watchedMovies[i])) {\n        const movieDetails = { ...moviesData[j] };\n        const genreIds = movieDetails.genre_ids;\n        if (genreIds && Array.isArray(genreIds)) {\n          movieDetails.genre_names = genresList.filter(genre => genreIds.includes(genre.id)).map(genre => genre.name).join(', ');\n          moviesDetailed.push(movieDetails);\n        } else {\n          console.error(`Error: Missing genre_ids property for movie with ID ${movieDetails.id}`);\n        }\n      }\n    }\n  }\n  return moviesDetailed;\n}\n"],"names":["$dDDEV","parcelRequire","document","addEventListener","querySelector","watchedMoviesList","queueMoviesList","classList","remove","add","watchedMovies","$jzQFI","loadLocalStorage","length","movies","parseInt","moviesData","j","id","i","movieDetails","$parcel$interopDefault","genreIds","genre_ids","Array","isArray","genre_names","genresList","filter","genre","includes","map","name","join","moviesDetailed","push","console","error","concat","j1","_loop","i1","_loop1","$a215baf1061f969f$var$getWatchedMoviesDetails","postersMarkup","param","original_title","poster_path","vote_average","release_date","posterPath","$b7ONl","IMG_BASE_URL","IMG_W500","releaseYear","slice","toFixed","innerHTML","handleWatchedButtonClick"],"version":3,"file":"my-library.b739c3c4.js.map"}